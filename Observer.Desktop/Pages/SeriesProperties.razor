@inherits BasePage

<MudContainer Style="width:50vw;margin-left:auto;margin-right:auto;">

    <MudContainer Class="d-flex flex-row gap-5 mt-10 ">
        <MudText>Local ID:</MudText>
        <MudText Style="margin-left:auto">@(Series?.ID)</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5  mt-3">
        <MudText>Release ID:</MudText>
        <MudText Style="margin-left:auto">@(Series?.ReleaseID)</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5 mt-3 " >
        <MudText>Symbol:</MudText>
        <MudText Style="margin-left:auto">@(Series?.Symbol)</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5 mt-3" >
        <MudText>Title:</MudText>
        <MudText Style="margin-left:auto">@(Series?.Title)</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5 mt-3">
        <MudText>Frequency:</MudText>
        <MudText Style="margin-left:auto">@(Series?.Frequency)</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5 mt-3">
        <MudText>Units:</MudText>
        <MudText Style="margin-left:auto">@(Series?.Units)</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5 mt-3">
        <MudText>Seasonal Adj:</MudText>
        <MudText Style="margin-left:auto">@(Series?.SeasonalAdj)</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5 mt-3">
        <MudText>Last Updated:</MudText>
        <MudText Style="margin-left:auto">@(Series?.LastUpdated)</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5 mt-3">
        <MudText>Popularity:</MudText>
        <MudText Style="margin-left:auto">@((Series?.Popularity))</MudText>
    </MudContainer>

    <MudContainer Class="d-flex flex-row gap-5 mt-3">
        <MudText>Real Time Start:</MudText>
        <MudText Style="margin-left:auto">@((Series?.RTStart.ToString(Constants.DateFormat) ?? "N/A"))</MudText>
    </MudContainer>
</MudContainer>

    @code {

    [Parameter] public string symbol { get; set; }
    [Parameter] public EventCallback<string> symbolChanged { get; set; }
    private FredSeries Series { get; set; }


    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        if (Series is null)
            await RefreshClickHandler();
    }


    private async Task RefreshClickHandler()
    {
        LeaderAnalytics.Vyntix.Elements.RowOpResult<FredSeries> result = await serviceClient.CallAsync(x => x.SeriesService.GetLocalSeries(symbol));

        if (!string.IsNullOrEmpty(result.Message))
            await MessageService.Error(result.Message);
        else
            Series = result.Item;
    }
}


